<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="338" failures="219" errors="0" time="17.943">
  <testsuite name="Notifications API" errors="0" failures="18" skipped="0" timestamp="2025-10-27T02:00:57" time="5.027" tests="20">
    <testcase classname="Notifications API › GET /api/notifications" name="should return user notifications when authenticated" time="0.102">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:86:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › GET /api/notifications" name="should return empty array when no notifications exist" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:102:23)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › GET /api/notifications" name="should return 401 when not authenticated" time="0.024">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:133:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › GET /api/notifications" name="should support pagination" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:143:33)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications" name="should create a new notification successfully" time="0.028">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:188:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications" name="should return 400 when required fields are missing" time="0.038">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:209:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications" name="should return 400 for invalid notification type" time="0.014">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:223:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications" name="should return 401 when not authenticated" time="0.021">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:236:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › PUT /api/notifications/:id" name="should mark notification as read successfully" time="0.014">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:248:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › PUT /api/notifications/:id" name="should return 404 for non-existent notification" time="0.016">
    </testcase>
    <testcase classname="Notifications API › PUT /api/notifications/:id" name="should return 401 when not authenticated" time="0.02">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:274:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API › DELETE /api/notifications/:id" name="should delete notification successfully" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:286:31)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:800:7)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › DELETE /api/notifications/:id" name="should return 404 for non-existent notification" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:286:31)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:800:7)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › DELETE /api/notifications/:id" name="should return 401 when not authenticated" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:286:31)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:800:7)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications/read-all" name="should mark all notifications as read successfully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:344:33)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:800:7)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › POST /api/notifications/read-all" name="should return 401 when not authenticated" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:344:33)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:800:7)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Notifications API › Cache Integration" name="should use cache for repeated requests" time="0.019">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 404
    at Object.toBe (/app/backend/tests/notifications-api.test.js:396:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Notifications API › Performance Monitoring" name="should include performance headers" time="0.012">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (/app/backend/tests/notifications-api.test.js:414:48)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Notifications API › Error Handling" name="should handle malformed JSON gracefully" time="0.017">
    </testcase>
    <testcase classname="Notifications API › Error Handling" name="should handle database errors gracefully" time="0.014">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/app/backend/tests/notifications-api.test.js:438:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)\n    at Object.&lt;anonymous&gt; (/app/backend/tests/notifications-api.test.js:68:23)\n    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:891:7)\n    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Health Check Endpoints" errors="0" failures="2" skipped="0" timestamp="2025-10-27T02:01:02" time="1.117" tests="7">
    <testcase classname="Health Check Endpoints › GET /api/health" name="should return 200 and a comprehensive health status when all components are healthy" time="0.028">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 503
    at Object.toBe (/app/backend/tests/health-cache.test.js:47:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/health" name="should return 503 if a critical component check fails" time="0.015">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;degraded&quot;
Received: &quot;unhealthy&quot;
    at Object.toBe (/app/backend/tests/health-cache.test.js:79:36)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/health" name="should use cache for subsequent requests within the TTL" time="0.029">
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/health/live" name="should return 200 with an alive status" time="0.018">
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/health/ready" name="should return 200 with a ready status when critical services are up" time="0.012">
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/health/ready" name="should return 503 if a critical service (Redis) is down" time="0.011">
    </testcase>
    <testcase classname="Health Check Endpoints › GET /api/status" name="should return 200 with lightweight service status" time="0.015">
    </testcase>
  </testsuite>
  <testsuite name="Notifications API Tests" errors="0" failures="4" skipped="0" timestamp="2025-10-27T02:01:03" time="1.3" tests="15">
    <testcase classname="Notifications API Tests › GET /api/notifications" name="should return list of notifications" time="0.052">
    </testcase>
    <testcase classname="Notifications API Tests › GET /api/notifications" name="should filter by type (deal)" time="0.036">
    </testcase>
    <testcase classname="Notifications API Tests › GET /api/notifications" name="should filter by read status" time="0.012">
    </testcase>
    <testcase classname="Notifications API Tests › GET /api/notifications" name="should support pagination" time="0.012">
    </testcase>
    <testcase classname="Notifications API Tests › PUT /api/notifications/:id/read" name="should mark notification as read" time="0.016">
    </testcase>
    <testcase classname="Notifications API Tests › PUT /api/notifications/:id/read" name="should return 404 for non-existent notification" time="0.013">
      <failure>Error: expected 404 &quot;Not Found&quot;, got 200 &quot;OK&quot;
    at Object.expect (/app/backend/tests/api/notifications.api.test.js:115:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API Tests › DELETE /api/notifications/:id" name="should delete notification successfully" time="0.012">
    </testcase>
    <testcase classname="Notifications API Tests › DELETE /api/notifications/:id" name="should not delete other users notifications" time="0.015">
      <failure>Error: expected 403 &quot;Forbidden&quot;, got 200 &quot;OK&quot;
    at Object.expect (/app/backend/tests/api/notifications.api.test.js:135:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API Tests › PUT /api/notifications/read-all" name="should mark all notifications as read" time="0.012">
    </testcase>
    <testcase classname="Notifications API Tests › DELETE /api/notifications/clear-all" name="should clear all notifications" time="0.012">
    </testcase>
    <testcase classname="Notifications API Tests › DELETE /api/notifications/clear-all" name="should only clear current users notifications" time="0.015">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;cleared&quot;
Received string:    &quot;Notification deleted&quot;
    at Object.toContain (/app/backend/tests/api/notifications.api.test.js:170:37)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Notifications API Tests › WebSocket Integration" name="should support real-time notifications" time="0.001">
    </testcase>
    <testcase classname="Notifications API Tests › Security Tests" name="should prevent SQL injection" time="0.011">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 200 &quot;OK&quot;
    at Object.expect (/app/backend/tests/api/notifications.api.test.js:189:10)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)
----
    at Test._assertStatus (/app/backend/node_modules/supertest/lib/test.js:309:14)
    at /app/backend/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/backend/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/backend/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/backend/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/backend/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Notifications API Tests › Security Tests" name="should prevent XSS in notification content" time="0.001">
    </testcase>
    <testcase classname="Notifications API Tests › Performance Tests" name="should handle 100 concurrent requests" time="0.964">
    </testcase>
  </testsuite>
  <testsuite name="Profile API" errors="0" failures="14" skipped="0" timestamp="2025-10-27T02:01:04" time="0.851" tests="14">
    <testcase classname="Profile API › GET /api/profile" name="should return user profile when authenticated" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › GET /api/profile" name="should return 401 when not authenticated" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › GET /api/profile" name="should return 401 with invalid token" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › PUT /api/profile" name="should update user profile successfully" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › PUT /api/profile" name="should return 400 for invalid data" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › PUT /api/profile" name="should return 401 when not authenticated" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › POST /api/profile/avatar" name="should update user avatar URL successfully" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › POST /api/profile/avatar" name="should return 400 when avatar_url is missing" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › POST /api/profile/avatar" name="should return 401 when not authenticated" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › DELETE /api/profile" name="should delete user account successfully" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › DELETE /api/profile" name="should return 401 when not authenticated" time="0.006">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › Cache Integration" name="should use cache for repeated requests" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › Performance Monitoring" name="should include performance headers" time="0.001">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Profile API › Error Handling" name="should handle database connection errors gracefully" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.user (/app/backend/tests/profile-api.test.js:16:19)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Destinations API" errors="0" failures="10" skipped="0" timestamp="2025-10-27T02:01:06" time="0.948" tests="10">
    <testcase classname="Destinations API › GET /api/destinations" name="should return all destinations with pagination" time="0.001">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should support search by name" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should support filtering by region" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should support filtering by price range" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should support sorting by rating" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should support multiple filters combined" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations" name="should handle pagination correctly" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations/:id" name="should return destination details by ID" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations/:id" name="should return 404 for non-existent destination" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Destinations API › GET /api/destinations/popular" name="should return popular destinations" time="0">
      <failure>TypeError: Cannot destructure property &apos;data&apos; of &apos;(intermediate value)&apos; as it is undefined.
    at Object.data (/app/backend/tests/destinations-api.test.js:90:15)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="OrchestratorAgent" errors="0" failures="4" skipped="0" timestamp="2025-10-27T02:01:07" time="0.18" tests="4">
    <testcase classname="OrchestratorAgent" name="should call Gemini with correct system instruction, prompt, and JSON config" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 1
Received number of calls: 0
    at Object.toHaveBeenCalledTimes (/app/backend/tests/orchestrator.test.js:47:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="OrchestratorAgent" name="should parse and return the JSON workflow from Gemini" time="0.007">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 10
+ Received  +  2

  Object {
-   &quot;name&quot;: &quot;Multi-step Plan&quot;,
+   &quot;name&quot;: &quot;Simple Web Search (Mock)&quot;,
    &quot;steps&quot;: Array [
      Object {
        &quot;agentId&quot;: &quot;research&quot;,
        &quot;id&quot;: &quot;step-1&quot;,
        &quot;taskInput&quot;: Object {
-         &quot;query&quot;: &quot;restaurants&quot;,
+         &quot;query&quot;: &quot;find restaurants and book one&quot;,
        },
        &quot;taskType&quot;: &quot;webSearch&quot;,
-     },
-     Object {
-       &quot;agentId&quot;: &quot;scheduler&quot;,
-       &quot;id&quot;: &quot;step-2&quot;,
-       &quot;taskInput&quot;: Object {
-         &quot;title&quot;: &quot;Dinner at {{steps.step-1.output.results[0].name}}&quot;,
-       },
-       &quot;taskType&quot;: &quot;createEvent&quot;,
      },
    ],
  }
    at Object.toEqual (/app/backend/tests/orchestrator.test.js:71:20)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="OrchestratorAgent" name="should fall back to mock logic if API key is not set" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;navigator&quot;
Received: &quot;travel&quot;
    at Object.toBe (/app/backend/tests/orchestrator.test.js:82:37)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="OrchestratorAgent" name="should fall back to mock logic if Gemini API call fails" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 1
Received number of calls: 0
    at Object.toHaveBeenCalledTimes (/app/backend/tests/orchestrator.test.js:90:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Supabase Database Operations" errors="0" failures="33" skipped="0" timestamp="2025-10-27T02:01:07" time="0.249" tests="33">
    <testcase classname="Supabase Database Operations › Database Connection" name="should initialize with test database configuration" time="0.004">
      <failure>Error: expect(received).toBeNull()

Received: {&quot;messages&quot;: Map {}, &quot;offers&quot;: [{&quot;category&quot;: &quot;family&quot;, &quot;description&quot;: &quot;رحلة شاملة لمدة 7 أيام تشمل إسطنبول وبورصة مع جولات سياحية يومية&quot;, &quot;destination&quot;: &quot;تركيا&quot;, &quot;discount_percentage&quot;: 29, &quot;duration_days&quot;: 7, &quot;id&quot;: &quot;1&quot;, &quot;includes&quot;: [&quot;طيران ذهاب وعودة&quot;, &quot;إقامة 5 نجوم&quot;, &quot;وجبات الإفطار&quot;, &quot;جولات سياحية&quot;, &quot;مرشد عربي&quot;], &quot;is_active&quot;: true, &quot;original_price&quot;: 3500, &quot;price&quot;: 2499, &quot;priority&quot;: 10, &quot;title&quot;: &quot;عرض تركيا الخاص - إسطنبول وبورصة&quot;}, {&quot;category&quot;: &quot;luxury&quot;, &quot;description&quot;: &quot;استكشف كوالالمبور ولنكاوي مع أفضل الفنادق والجولات&quot;, &quot;destination&quot;: &quot;ماليزيا&quot;, &quot;discount_percentage&quot;: 21, &quot;duration_days&quot;: 10, &quot;id&quot;: &quot;2&quot;, &quot;includes&quot;: [&quot;طيران درجة أولى&quot;, &quot;فنادق 5 نجوم&quot;, &quot;جميع الوجبات&quot;, &quot;جولات خاصة&quot;, &quot;تأمين شامل&quot;], &quot;is_active&quot;: true, &quot;original_price&quot;: 4200, &quot;price&quot;: 3299, &quot;priority&quot;: 9, &quot;title&quot;: &quot;عرض ماليزيا الذهبي&quot;}, {&quot;category&quot;: &quot;budget&quot;, &quot;description&quot;: &quot;عطلة نهاية أسبوع في دبي بأسعار لا تقاوم&quot;, &quot;destination&quot;: &quot;الإمارات&quot;, &quot;discount_percentage&quot;: 28, &quot;duration_days&quot;: 4, &quot;id&quot;: &quot;3&quot;, &quot;includes&quot;: [&quot;طيران اقتصادي&quot;, &quot;فندق 4 نجوم&quot;, &quot;إفطار&quot;, &quot;تذاكر برج خليفة&quot;], &quot;is_active&quot;: true, &quot;original_price&quot;: 1800, &quot;price&quot;: 1299, &quot;priority&quot;: 8, &quot;title&quot;: &quot;مغامرة دبي الاقتصادية&quot;}], &quot;profiles&quot;: Map {}}
    at Object.toBeNull (/app/backend/tests/__tests__/database.test.js:55:32)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Database Connection" name="should handle missing configuration gracefully" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Profile Management" name="should create user profile successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Profile Management" name="should get user profile successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Profile Management" name="should return null for non-existent user" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Profile Management" name="should update user profile successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Profile Management" name="should handle duplicate telegram_id on profile creation" time="0.002">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;avatar_url&quot;: null, &quot;created_at&quot;: &quot;2025-10-27T02:01:07.449Z&quot;, &quot;preferences&quot;: {&quot;language&quot;: &quot;ar&quot;}, &quot;telegram_id&quot;: 1761530467688, &quot;travel_history&quot;: [], &quot;updated_at&quot;: &quot;2025-10-27T02:01:07.449Z&quot;, &quot;username&quot;: &quot;testuser&quot;}
    at expect (/app/backend/node_modules/expect/build/index.js:2116:15)
    at Object.expect (/app/backend/tests/__tests__/database.test.js:141:13)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Conversation Management" name="should save conversation message successfully" time="0.008">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:148:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Conversation Management" name="should save assistant message successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:148:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Conversation Management" name="should get conversation history successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:148:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Conversation Management" name="should limit conversation history results" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:148:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Conversation Management" name="should return empty array for user with no messages" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:148:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should get all travel offers successfully" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:213:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should filter offers by destination" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:235:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should filter offers by maximum price" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:256:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should filter offers by category" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:275:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should create new travel offer successfully" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Travel Offers Management" name="should search offers by query" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:320:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Preferences and Travel History" name="should save user preference successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:344:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Preferences and Travel History" name="should add to travel history successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:344:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Preferences and Travel History" name="should get personalized offers based on user history" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:344:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Offer Interactions" name="should track offer interaction successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:421:25)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Offer Interactions" name="should handle different interaction types" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database.test.js:421:25)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Analytics" name="should get user analytics successfully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:456:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › User Analytics" name="should return null for non-existent user analytics" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:456:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Error Handling" name="should handle database connection errors gracefully" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Error Handling" name="should handle invalid data types" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Error Handling" name="should handle concurrent operations" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Data Validation and Constraints" name="should enforce unique telegram_id constraint" time="0.002">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;avatar_url&quot;: null, &quot;created_at&quot;: &quot;2025-10-27T02:01:07.526Z&quot;, &quot;preferences&quot;: {&quot;language&quot;: &quot;ar&quot;}, &quot;telegram_id&quot;: 1761530467831, &quot;travel_history&quot;: [], &quot;updated_at&quot;: &quot;2025-10-27T02:01:07.526Z&quot;, &quot;username&quot;: &quot;unique_test_user&quot;}
    at expect (/app/backend/node_modules/expect/build/index.js:2116:15)
    at Object.expect (/app/backend/tests/__tests__/database.test.js:553:13)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Data Validation and Constraints" name="should handle null values appropriately" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Data Validation and Constraints" name="should validate required fields for offers" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Performance and Load Testing" name="should handle bulk operations efficiently" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Supabase Database Operations › Performance and Load Testing" name="should handle large conversation history" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database.test.js:609:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database.test.js:48:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Database Schema Operations" errors="0" failures="23" skipped="0" timestamp="2025-10-27T02:01:07" time="0.189" tests="23">
    <testcase classname="Database Schema Operations › Table Creation and Structure" name="should verify all required tables exist" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;from&apos;)
    at Object.from (/app/backend/tests/__tests__/database-schema.test.js:53:58)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Table Creation and Structure" name="should verify table structures and columns" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;rpc&apos;)
    at Object.rpc (/app/backend/tests/__tests__/database-schema.test.js:62:65)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Primary Key Constraints" name="should enforce unique constraints on profiles.telegram_id" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:86:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Primary Key Constraints" name="should enforce unique constraints on users.email" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-schema.test.js:93:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Foreign Key Relationships" name="should maintain referential integrity for trips.user_id" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:116:24)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Foreign Key Relationships" name="should handle cascade deletes properly" time="0.008">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:116:24)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Foreign Key Relationships" name="should prevent orphaned records" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:116:24)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Check Constraints" name="should enforce trip status check constraint" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:184:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Check Constraints" name="should enforce payment status check constraint" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:205:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Check Constraints" name="should enforce message role check constraint" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:226:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Index Performance" name="should efficiently query trips by user_id using index" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:247:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Index Performance" name="should efficiently query trips by status using index" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:247:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Index Performance" name="should efficiently query expenses by trip_id using index" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:247:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Data Types and Validation" name="should handle UUID data types correctly" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:356:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Data Types and Validation" name="should handle decimal/numeric data types correctly" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:372:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Data Types and Validation" name="should handle timestamp data types correctly" time="0.008">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:396:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Data Types and Validation" name="should handle array data types correctly" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestTravelOffer (/app/backend/tests/utils/database-test-helpers.js:311:29)
    at Object.createTestTravelOffer (/app/backend/tests/__tests__/database-schema.test.js:411:31)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Row Level Security (RLS)" name="should enforce RLS policies for profiles table" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;rpc&apos;)
    at Object.rpc (/app/backend/tests/__tests__/database-schema.test.js:430:60)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Row Level Security (RLS)" name="should enforce RLS policies for trips table" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:444:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Database Functions and Triggers" name="should execute handle_new_user function correctly" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;rpc&apos;)
    at Object.rpc (/app/backend/tests/__tests__/database-schema.test.js:473:60)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Storage Bucket Operations" name="should verify avatars storage bucket exists" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;storage&apos;)
    at Object.storage (/app/backend/tests/__tests__/database-schema.test.js:490:58)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Concurrent Operations and Race Conditions" name="should handle concurrent trip creation" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:504:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Database Schema Operations › Concurrent Operations and Race Conditions" name="should handle concurrent expense creation" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-schema.test.js:530:30)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-schema.test.js:34:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Authentication Flows" errors="0" failures="27" skipped="0" timestamp="2025-10-27T02:01:07" time="0.209" tests="27">
    <testcase classname="Authentication Flows › User Registration" name="should register new user successfully" time="0.003">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:35:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Registration" name="should create user profile via trigger on registration" time="0.003">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:52:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Registration" name="should handle duplicate email registration" time="0.007">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:85:79)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Registration" name="should validate email format" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:104:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Registration" name="should validate password strength" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:114:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Login and Authentication" name="should login user successfully" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:129:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Login and Authentication" name="should reject login with wrong password" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:129:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Login and Authentication" name="should reject login with non-existent email" time="0.003">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:129:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Login and Authentication" name="should get current user session" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:129:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › User Login and Authentication" name="should get current user information" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:129:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Session Management" name="should refresh session token" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:214:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Session Management" name="should logout user successfully" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:214:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Session Management" name="should handle logout when not logged in" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:214:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Password Reset" name="should initiate password reset successfully" time="0.008">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:271:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Password Reset" name="should handle password reset for non-existent email" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:271:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Password Reset" name="should update password successfully" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:271:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Row Level Security (RLS) and Access Control" name="should enforce RLS on users table" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:333:71)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Row Level Security (RLS) and Access Control" name="should enforce RLS on trips table" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:333:71)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Row Level Security (RLS) and Access Control" name="should enforce RLS on expenses table" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:333:71)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › JWT Token Validation" name="should include correct claims in JWT token" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:485:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › JWT Token Validation" name="should handle expired tokens appropriately" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:485:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Telegram Authentication Integration" name="should handle Telegram user profile creation" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-auth.test.js:539:29)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Telegram Authentication Integration" name="should handle Telegram user profile updates" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;insert&apos;)
    at createTestUser (/app/backend/tests/utils/database-test-helpers.js:234:24)
    at Object.createTestUser (/app/backend/tests/__tests__/database-auth.test.js:549:36)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Error Scenarios and Edge Cases" name="should handle malformed auth requests" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:582:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Error Scenarios and Edge Cases" name="should handle malformed login requests" time="0.002">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:592:56)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Error Scenarios and Edge Cases" name="should handle concurrent login attempts" time="0.007">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:605:32)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Authentication Flows › Error Scenarios and Edge Cases" name="should handle rapid session changes" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;auth&apos;)
    at Object.auth (/app/backend/tests/__tests__/database-auth.test.js:635:32)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;delete&apos;)
    at cleanupTestData (/app/backend/tests/utils/database-test-helpers.js:196:21)
    at Object.cleanupTestData (/app/backend/tests/__tests__/database-auth.test.js:30:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Bookings API" errors="0" failures="1" skipped="0" timestamp="2025-10-27T02:01:08" time="0.142" tests="1">
    <testcase classname="Bookings API" name="should create a new booking" time="0.035">
      <failure>Error: expect(received).toEqual(expected) // deep equality

Expected: 201
Received: 400
    at Object.toEqual (/app/backend/tests/bookings.test.js:27:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Communication Channel Routes" errors="0" failures="2" skipped="0" timestamp="2025-10-27T02:01:08" time="0.187" tests="4">
    <testcase classname="Communication Channel Routes" name="should respond to Discord webhook" time="0.027">
    </testcase>
    <testcase classname="Communication Channel Routes" name="should respond to Messenger webhook" time="0.019">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;id&apos;)
    at id (/app/backend/routes/messenger.js:74:35)
    at handleMessage (/app/backend/routes/messenger.js:51:21)
    at Array.forEach (&lt;anonymous&gt;)
    at forEach (/app/backend/routes/messenger.js:49:27)
    at Array.forEach (&lt;anonymous&gt;)
    at forEach (/app/backend/routes/messenger.js:47:20)
    at Layer.handle [as handle_request] (/app/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/backend/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/app/backend/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/app/backend/node_modules/express/lib/router/layer.js:95:5)
    at /app/backend/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/app/backend/node_modules/express/lib/router/index.js:346:12)
    at next (/app/backend/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/app/backend/node_modules/express/lib/router/index.js:175:3)
    at router (/app/backend/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/app/backend/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/app/backend/node_modules/express/lib/router/index.js:328:13)
    at /app/backend/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/app/backend/node_modules/express/lib/router/index.js:346:12)
    at next (/app/backend/node_modules/express/lib/router/index.js:280:10)
    at /app/backend/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
    at invokeCallback (/app/backend/node_modules/raw-body/index.js:238:16)
    at done (/app/backend/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/app/backend/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:519:28)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at processTicksAndRejections (node:internal/process/task_queues:90:21)</failure>
    </testcase>
    <testcase classname="Communication Channel Routes" name="should respond to Email webhook" time="0.019">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/app/backend/tests/communication-channels.test.js:62:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Communication Channel Routes" name="should respond to IVR (Twilio) voice webhook" time="0.015">
    </testcase>
  </testsuite>
  <testsuite name="WhatsApp Webhook Route (/api/whatsapp/webhook)" errors="0" failures="1" skipped="0" timestamp="2025-10-27T02:01:08" time="0.157" tests="4">
    <testcase classname="WhatsApp Webhook Route (/api/whatsapp/webhook)" name="should process a valid text message from a new user" time="0.029">
    </testcase>
    <testcase classname="WhatsApp Webhook Route (/api/whatsapp/webhook)" name="should process a valid text message from an existing user" time="0.013">
    </testcase>
    <testcase classname="WhatsApp Webhook Route (/api/whatsapp/webhook)" name="should return 200 for non-text messages or invalid payloads" time="0.016">
    </testcase>
    <testcase classname="WhatsApp Webhook Route (/api/whatsapp/webhook)" name="should return 500 if the AIX connection manager fails" time="0.016">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 500
Received: 200
    at Object.toBe (/app/backend/tests/whatsapp-route.test.js:121:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
      <failure>Error: Internal AIX Error
    at Object.&lt;anonymous&gt; (/app/backend/tests/whatsapp-route.test.js:117:63)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Logger Utility" errors="0" failures="26" skipped="0" timestamp="2025-10-27T02:01:08" time="0.133" tests="26">
    <testcase classname="Logger Utility › Logger Initialization" name="should create logger with default options" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Logger Initialization" name="should create logger with custom options" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Logger Initialization" name="should create log directory if it does not exist" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log error messages" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log warning messages" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log info messages" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log debug messages" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log trace messages" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Levels" name="should log success messages" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Level Filtering" name="should respect log level - error only" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Level Filtering" name="should respect log level - warn and above" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Log Level Filtering" name="should respect log level - info and above" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Metadata Support" name="should include metadata in log messages" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Metadata Support" name="should handle empty metadata" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › File Logging" name="should write logs to file" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › File Logging" name="should not write to file when logToFile is false" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › File Logging" name="should append to existing log file" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Child Logger" name="should create child logger with prefix" time="0.008">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Child Logger" name="should inherit parent log level" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Child Logger" name="should support nested child loggers" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Utility Methods" name="should clear log file" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Utility Methods" name="should return log file path" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Utility Methods" name="should format timestamp correctly" time="0.002">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Error Handling" name="should handle logging with logToFile disabled" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Default Logger Export" name="should export default logger instance" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger Utility › Default Logger Export" name="should export Logger class" time="0.001">
      <failure>TypeError: Logger is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/src/utils/__tests__/logger.test.js:33:14)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Auth Middleware Tests" errors="0" failures="12" skipped="0" timestamp="2025-10-27T02:01:08" time="0.143" tests="14">
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should authenticate valid token" time="0.007">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;123456789&quot;
Received: undefined
    at Object.toBe (/app/backend/tests/middleware/auth.test.js:55:35)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should reject request without token" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: ObjectContaining {&quot;code&quot;: &quot;TOKEN_MISSING&quot;}
Received: {&quot;error&quot;: &quot;Access token required&quot;, &quot;success&quot;: false}

Number of calls: 1
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:62:24)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should reject invalid token format" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401
Received: 403

Number of calls: 1
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:75:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should reject expired token" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401
Received: 403

Number of calls: 1
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:90:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should reject token with invalid signature" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401
Received: 403

Number of calls: 1
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:104:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should reject if user not found in database" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401

Number of calls: 0
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:119:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › authenticateToken" name="should handle database errors gracefully" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 500

Number of calls: 0
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:140:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › optionalAuth" name="should attach user if valid token provided" time="0.002">
      <failure>TypeError: optionalAuth is not a function
    at Object.optionalAuth (/app/backend/tests/middleware/auth.test.js:155:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › optionalAuth" name="should continue without user if no token" time="0.002">
      <failure>TypeError: optionalAuth is not a function
    at Object.optionalAuth (/app/backend/tests/middleware/auth.test.js:162:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › optionalAuth" name="should continue without user if invalid token" time="0.002">
      <failure>TypeError: optionalAuth is not a function
    at Object.optionalAuth (/app/backend/tests/middleware/auth.test.js:171:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › Security" name="should prevent token manipulation" time="0.009">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401
Received: 403

Number of calls: 1
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:191:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › Security" name="should validate token claims" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 401

Number of calls: 0
    at Object.toHaveBeenCalledWith (/app/backend/tests/middleware/auth.test.js:205:26)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="Auth Middleware Tests › Security" name="should prevent timing attacks" time="0.003">
    </testcase>
    <testcase classname="Auth Middleware Tests › Performance" name="should handle 100 concurrent auth requests" time="0.019">
    </testcase>
  </testsuite>
  <testsuite name="VisionAgent" errors="0" failures="3" skipped="0" timestamp="2025-10-27T02:01:08" time="0.092" tests="5">
    <testcase classname="VisionAgent" name="should throw error if API key is not set" time="0.012">
    </testcase>
    <testcase classname="VisionAgent › analyzeImage" name="should call Gemini Vision API with correct parameters and return description" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at VisionAgent.getAi [as executeTask] (/app/backend/agents/VisionAgent.js:76:20)
    at Object.executeTask (/app/backend/tests/visionAgent.test.js:60:34)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="VisionAgent › analyzeImage" name="should fetch remote image and call Gemini Vision API" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at VisionAgent.getAi [as executeTask] (/app/backend/agents/VisionAgent.js:76:20)
    at Object.executeTask (/app/backend/tests/visionAgent.test.js:81:36)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="VisionAgent › extractText" name="should call Cloud Vision textDetection and return formatted text" time="0.002">
      <failure>TypeError: this.cloudVisionClient.textDetection is not a function
    at VisionAgent.textDetection [as executeTask] (/app/backend/agents/VisionAgent.js:88:59)
    at Object.executeTask (/app/backend/tests/visionAgent.test.js:107:34)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="VisionAgent" name="should throw error for unknown task type" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="StreamService" errors="0" failures="5" skipped="0" timestamp="2025-10-27T02:01:08" time="0.103" tests="5">
    <testcase classname="StreamService › initializeStream" name="should initialize a new stream with proper headers" time="0.002">
      <failure>TypeError: streamService.initializeStream is not a function
    at Object.initializeStream (/app/backend/tests/unit/services/streamService.test.js:19:36)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="StreamService › cancelStream" name="should cancel an active stream" time="0.001">
      <failure>TypeError: streamService.initializeStream is not a function
    at Object.initializeStream (/app/backend/tests/unit/services/streamService.test.js:37:42)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="StreamService › sendChunk" name="should send chunk if stream is active" time="0.002">
      <failure>TypeError: streamService.initializeStream is not a function
    at Object.initializeStream (/app/backend/tests/unit/services/streamService.test.js:52:42)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="StreamService › sendChunk" name="should not send chunk if stream is canceled" time="0.002">
      <failure>TypeError: streamService.initializeStream is not a function
    at Object.initializeStream (/app/backend/tests/unit/services/streamService.test.js:67:42)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="StreamService › getStats" name="should return service statistics" time="0.002">
      <failure>TypeError: streamService.getStats is not a function
    at Object.getStats (/app/backend/tests/unit/services/streamService.test.js:77:35)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="CodingAgent" errors="0" failures="8" skipped="0" timestamp="2025-10-27T02:01:09" time="0.089" tests="9">
    <testcase classname="CodingAgent" name="should throw error if API_KEY is not set" time="0.015">
    </testcase>
    <testcase classname="CodingAgent" name="generateUI should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:59:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="designAPI should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:69:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="createDeploymentConfig should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:79:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="writeTests should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:89:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="generateDocumentation should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:99:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="reviewCode should call Gemini with correct parameters" time="0.002">
      <failure>Error: GoogleGenAI client is not initialized. Please set the API_KEY environment variable.
    at getAi (/app/backend/services/geminiService.js:34:11)
    at CodingAgent.getAi [as executeTask] (/app/backend/agents/CodingAgent.js:149:18)
    at executeTask (/app/backend/tests/codingAgent.test.js:41:32)
    at Object.testSubAgent (/app/backend/tests/codingAgent.test.js:110:11)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="should throw error for unknown task type" time="0.004">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Unknown task type: unknownTask&quot;
Received message:   &quot;GoogleGenAI client is not initialized. Please set the API_KEY environment variable.&quot;

      32 | function getAi() {
      33 |   if (!ai) {
    &gt; 34 |     throw new Error(&apos;GoogleGenAI client is not initialized. Please set the API_KEY environment variable.&apos;);
         |           ^
      35 |   }
      36 |   return ai;
      37 | }

      at getAi (services/geminiService.js:34:11)
      at CodingAgent.getAi [as executeTask] (agents/CodingAgent.js:149:18)
      at Object.executeTask (tests/codingAgent.test.js:120:24)
    at Object.toThrow (/app/backend/node_modules/expect/build/index.js:2155:20)
    at Object.toThrow (/app/backend/tests/codingAgent.test.js:121:16)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="CodingAgent" name="should handle Gemini API errors gracefully" time="0.003">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Gemini API call failed&quot;
Received message:   &quot;GoogleGenAI client is not initialized. Please set the API_KEY environment variable.&quot;

      32 | function getAi() {
      33 |   if (!ai) {
    &gt; 34 |     throw new Error(&apos;GoogleGenAI client is not initialized. Please set the API_KEY environment variable.&apos;);
         |           ^
      35 |   }
      36 |   return ai;
      37 | }

      at getAi (services/geminiService.js:34:11)
      at CodingAgent.getAi [as executeTask] (agents/CodingAgent.js:149:18)
      at Object.executeTask (tests/codingAgent.test.js:128:24)
    at Object.toThrow (/app/backend/node_modules/expect/build/index.js:2155:20)
    at Object.toThrow (/app/backend/tests/codingAgent.test.js:129:16)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="MarketingAgent" errors="0" failures="10" skipped="0" timestamp="2025-10-27T02:01:09" time="0.08" tests="10">
    <testcase classname="MarketingAgent" name="should throw error if API_KEY is not set" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="conductMarketResearch should call Gemini with Google Search tool and return response with grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="optimizeSEOStrategy should call Gemini with Google Search tool and return response with grounding chunks" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="developContentStrategy should call Gemini with Google Search tool and return response with grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="manageSocialMedia should call Gemini with Google Search tool and return response with grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="launchMarketingCampaign should call Gemini with Google Search tool and return response with grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="analyzeMarketingData should call Gemini with Google Search tool and return response with grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="generateMarketingPlan should orchestrate all sub-agents and include grounding chunks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="should throw error for unknown task type" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="MarketingAgent" name="should handle Gemini API errors gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;models&apos;)
    at Object.&lt;anonymous&gt; (/app/backend/tests/marketingAgent.test.js:28:40)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="IntelligentCache" errors="0" failures="3" skipped="0" timestamp="2025-10-27T02:01:09" time="0.067" tests="6">
    <testcase classname="IntelligentCache" name="should set and get a value from the cache" time="0.005">
    </testcase>
    <testcase classname="IntelligentCache" name="should return null for a non-existent key" time="0.004">
    </testcase>
    <testcase classname="IntelligentCache" name="should respect TTL and expire a cached item" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;ttl-data&quot;
Received: null
    at Object.toBe (/app/backend/tests/IntelligentCache.test.js:52:25)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="IntelligentCache" name="should use the fallback function when a key is not in cache" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 1
Received number of calls: 0
    at Object.toHaveBeenCalledTimes (/app/backend/tests/IntelligentCache.test.js:69:24)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="IntelligentCache" name="should invalidate cache by pattern" time="0.003">
      <failure>TypeError: cache.invalidate is not a function
    at Object.invalidate (/app/backend/tests/IntelligentCache.test.js:82:17)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
    <testcase classname="IntelligentCache" name="should clear the entire cache" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="ResearchAgent" errors="0" failures="7" skipped="0" timestamp="2025-10-27T02:01:09" time="0.074" tests="7">
    <testcase classname="ResearchAgent" name="should throw error if API key is not set" time="0.002">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent" name="should throw error for unknown task type" time="0.001">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent › webSearch" name="should call Gemini with googleSearch tool and correct query" time="0.002">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent › webSearch" name="should throw error if query is missing" time="0.006">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent › locationQuery" name="should call Gemini with googleMaps tool without location config" time="0.001">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent › locationQuery" name="should call Gemini with googleMaps tool WITH location config" time="0.001">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="ResearchAgent › locationQuery" name="should throw error if query is missing" time="0.002">
      <failure>TypeError: ResearchAgent is not a constructor
    at Object.&lt;anonymous&gt; (/app/backend/tests/researchAgent.test.js:27:13)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Logger" errors="0" failures="6" skipped="0" timestamp="2025-10-27T02:01:09" time="0.059" tests="6">
    <testcase classname="Logger" name="should be an instance of Logger" time="0.008">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger" name="should create log directory if it does not exist" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger" name="should call console.log and fs.appendFileSync for each log level" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger" name="should format message correctly" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger" name="should not log if level is lower than currentLevel" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
    <testcase classname="Logger" name="should handle specialized logs" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEBUG&apos;)
    at Object.DEBUG (/app/backend/utils/__tests__/logger.test.js:31:44)
    at Promise.finally.completed (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:453:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at _runTest (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/backend/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/backend/node_modules/jest-runner/build/index.js:275:16)
    at runTest (/app/backend/node_modules/jest-runner/build/index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Quantum Explorer Engine - WebAnalysisService" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:09" time="1.567" tests="2">
    <testcase classname="Quantum Explorer Engine - WebAnalysisService" name="should return a synthesized answer for a web query" time="0.005">
    </testcase>
    <testcase classname="Quantum Explorer Engine - WebAnalysisService" name="should handle cases with no search results" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="MemoryCache" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:11" time="1.177" tests="14">
    <testcase classname="MemoryCache › Basic Operations" name="should set and get a value" time="0.003">
    </testcase>
    <testcase classname="MemoryCache › Basic Operations" name="should return null for non-existent key" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Basic Operations" name="should delete a key" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Basic Operations" name="should return 0 when deleting non-existent key" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › TTL (Time To Live)" name="should expire after TTL" time="1.108">
    </testcase>
    <testcase classname="MemoryCache › TTL (Time To Live)" name="should get TTL for a key" time="0.003">
    </testcase>
    <testcase classname="MemoryCache › TTL (Time To Live)" name="should return -1 for non-existent key TTL" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Pattern Operations" name="should get keys by pattern" time="0.003">
    </testcase>
    <testcase classname="MemoryCache › Pattern Operations" name="should delete keys by pattern" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Statistics" name="should track cache hits and misses" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Statistics" name="should calculate hit rate" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Flush Operations" name="should flush all cache" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Memory Usage" name="should report memory usage" time="0.002">
    </testcase>
    <testcase classname="MemoryCache › Cache Enabled" name="should report cache as enabled" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Z.ai API Connection Tests" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:12" time="0.148" tests="23">
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should test Original configuration successfully" time="0.005">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle Original configuration API errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle Original configuration network errors" time="0.017">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should test GLM-4 model successfully" time="0.008">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle GLM-4 model API errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle GLM-4 model network errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should test V1 endpoint successfully" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle V1 endpoint API errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle V1 endpoint network errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should test OpenAI compatible endpoint successfully" time="0.009">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle OpenAI compatible endpoint API errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › API Endpoint Testing" name="should handle OpenAI compatible endpoint network errors" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Request Configuration" name="should include correct headers" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Request Configuration" name="should include correct request body" time="0.002">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Response Handling" name="should parse successful JSON response" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Response Handling" name="should handle rate limit response" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Response Handling" name="should handle server error response" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Environment Configuration" name="should use API key from environment" time="0.002">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Environment Configuration" name="should handle missing API key" time="0.002">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Error Scenarios" name="should handle malformed JSON response" time="0.004">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Error Scenarios" name="should handle empty response" time="0.002">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Error Scenarios" name="should handle fetch timeout" time="0.003">
    </testcase>
    <testcase classname="Z.ai API Connection Tests › Integration Tests" name="should find working configuration" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Rate Limits Tests" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:12" time="0.132" tests="20">
    <testcase classname="Rate Limits Tests › General API Rate Limiter" name="should handle successful requests within limit" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › General API Rate Limiter" name="should handle rate limit exceeded" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › General API Rate Limiter" name="should track rate limit headers correctly" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › AI Rate Limiter" name="should handle AI requests within limit" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › AI Rate Limiter" name="should handle AI rate limit exceeded" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › AI Rate Limiter" name="should handle AI service unavailable" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Payment Rate Limiter" name="should handle payment requests within limit" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › Payment Rate Limiter" name="should handle payment rate limit exceeded" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › Payment Rate Limiter" name="should handle payment validation errors" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Analytics Rate Limiter" name="should handle analytics requests within limit" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Analytics Rate Limiter" name="should handle analytics rate limit exceeded" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Rate Limit Headers" name="should include all required rate limit headers" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › Rate Limit Headers" name="should handle missing rate limit headers" time="0.003">
    </testcase>
    <testcase classname="Rate Limits Tests › Rate Limit Reset Functionality" name="should decrement remaining counter correctly" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Rate Limit Reset Functionality" name="should handle non-numeric remaining values" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Environment Configuration" name="should use default API URL when not set" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Environment Configuration" name="should use custom API URL when provided" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Error Handling" name="should handle network errors" time="0.015">
    </testcase>
    <testcase classname="Rate Limits Tests › Error Handling" name="should handle timeout errors" time="0.002">
    </testcase>
    <testcase classname="Rate Limits Tests › Concurrent Requests" name="should handle multiple concurrent requests" time="0.007">
    </testcase>
  </testsuite>
  <testsuite name="Security - Token Manager" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:12" time="0.13" tests="27">
    <testcase classname="Security - Token Manager › Token Generation" name="should generate token with default expiration" time="0.003">
    </testcase>
    <testcase classname="Security - Token Manager › Token Generation" name="should generate token with custom expiration" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Generation" name="should generate token with metadata" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Generation" name="should generate unique tokens" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Validation" name="should validate valid token" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Validation" name="should reject invalid token" time="0.006">
    </testcase>
    <testcase classname="Security - Token Manager › Token Validation" name="should validate token with required scope" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Validation" name="should reject token with insufficient scope" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Validation" name="should track token usage" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Revocation" name="should revoke token" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Revocation" name="should return false for non-existent token" time="0.001">
    </testcase>
    <testcase classname="Security - Token Manager › Token Revocation" name="should revoke all user tokens" time="0.001">
    </testcase>
    <testcase classname="Security - Token Manager › Token Info" name="should get token info" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Token Info" name="should return null for non-existent token" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Expiration Calculation" name="should calculate seconds expiration" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Expiration Calculation" name="should calculate minutes expiration" time="0.002">
    </testcase>
    <testcase classname="Security - Token Manager › Expiration Calculation" name="should calculate hours expiration" time="0.001">
    </testcase>
    <testcase classname="Security - Token Manager › Expiration Calculation" name="should calculate days expiration" time="0.001">
    </testcase>
    <testcase classname="Security - Token Manager › Expiration Calculation" name="should throw error for invalid format" time="0.023">
    </testcase>
    <testcase classname="Security - Token Manager › Statistics" name="should get token statistics" time="0.002">
    </testcase>
    <testcase classname="Security - External API Limiter › Rate Limit Checking" name="should allow request within limits" time="0.002">
    </testcase>
    <testcase classname="Security - External API Limiter › Rate Limit Checking" name="should track remaining requests" time="0.001">
    </testcase>
    <testcase classname="Security - External API Limiter › Rate Limit Checking" name="should handle unknown API gracefully" time="0.001">
    </testcase>
    <testcase classname="Security - External API Limiter › User Statistics" name="should get user stats" time="0.002">
    </testcase>
    <testcase classname="Security - External API Limiter › User Statistics" name="should show zero usage for new user" time="0.002">
    </testcase>
    <testcase classname="Security - External API Limiter › Limit Reset" name="should reset specific API limits" time="0.002">
    </testcase>
    <testcase classname="Security - External API Limiter › Limit Reset" name="should reset all API limits" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Database Mocks" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:12" time="0.031" tests="1">
    <testcase classname="Database Mocks" name="should export mock functions" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="AI Services Mocks" errors="0" failures="0" skipped="0" timestamp="2025-10-27T02:01:12" time="0.031" tests="1">
    <testcase classname="AI Services Mocks" name="should export mock functions" time="0.003">
    </testcase>
  </testsuite>
</testsuites>