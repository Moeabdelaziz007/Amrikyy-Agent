{{ define "email.subject" }}
[{{ .Status | toUpper }}] {{ .GroupLabels.SortedPairs.Values | join " " }} {{ if eq .Status "firing" }}({{ .Alerts.Firing | len }}){{ end }}
{{ end }}

{{ define "email.body" }}
{{ if gt (len .Alerts.Firing) 0 }}
{{ range .Alerts.Firing }}
üö® **FIRING ALERT**

**Alert:** {{ .Annotations.summary }}
**Description:** {{ .Annotations.description }}
**Severity:** {{ .Labels.severity | toUpper }}
**Service:** {{ .Labels.service }}
**Instance:** {{ .Labels.instance }}
**Started:** {{ .StartsAt | since }}
**Runbook:** {{ .Annotations.runbook }}

{{ if .Labels.runbook_url }}**Runbook URL:** {{ .Labels.runbook_url }}{{ end }}
---
{{ end }}

{{ end }}

{{ if gt (len .Alerts.Resolved) 0 }}
{{ range .Alerts.Resolved }}

‚úÖ **RESOLVED ALERT**

**Alert:** {{ .Annotations.summary }}
**Description:** {{ .Annotations.description }}
**Severity:** {{ .Labels.severity | toUpper }}
**Service:** {{ .Labels.service }}
**Instance:** {{ .Labels.instance }}
**Duration:** {{ .EndsAt | since .StartsAt }}
---
{{ end }}

{{ end }}

{{ if gt (len .Alerts) 0 }}
üìä **Alert Summary:**
- Total Alerts: {{ len .Alerts }}
- Firing: {{ len .Alerts.Firing }}
- Resolved: {{ len .Alerts.Resolved }}

üîç **Common Labels:**{{ range .CommonLabels.SortedPairs }}
- {{ .Name }}: {{ .Value }}{{ end }}

üîó **Dashboard URL:** {{ .ExternalURL }}/#/alerts?receiver={{ .Receiver }}

{{ end }}
{{ end }}

{{ define "email.slack.body" }}
{{ range .Alerts.Firing }}
üö® *{{ .Annotations.summary }}*
{{ .Annotations.description }}
*Severity:* {{ .Labels.severity | toUpper }}
*Service:* {{ .Labels.service }}
*Instance:* {{ .Labels.instance }}
*Started:* {{ .StartsAt | since }}
{{ if .Annotations.runbook }}*Runbook:* {{ .Annotations.runbook }}{{ end }}

{{ end }}
{{ range .Alerts.Resolved }}
‚úÖ *RESOLVED:* {{ .Annotations.summary }}
*Duration:* {{ .EndsAt | since .StartsAt }}

{{ end }}
{{ end }}

{{ define "email.pagerduty.body" }}
{{ if gt (len .Alerts.Firing) 0 }}
üö® CRITICAL ALERTS FIRING:

{{ range .Alerts.Firing }}
**{{ .Annotations.summary }}**
{{ .Annotations.description }}
Service: {{ .Labels.service }}
Instance: {{ .Labels.instance }}
Severity: {{ .Labels.severity }}
{{ end }}

{{ end }}
{{ if gt (len .Alerts.Resolved) 0 }}
‚úÖ RESOLVED ALERTS:

{{ range .Alerts.Resolved }}
**{{ .Annotations.summary }}** (Duration: {{ .EndsAt | since .StartsAt }})
{{ end }}

{{ end }}
{{ end }}